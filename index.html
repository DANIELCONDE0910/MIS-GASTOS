<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Mis Gastos">
    <title>Control de Gastos Personales</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
        }
        body {
            overscroll-behavior: none;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 min-h-screen">
    <div id="app"></div>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function ExpenseApp() {
            const [expenses, setExpenses] = useState([]);
            const [categories] = useState([
                { id: 1, name: 'üçî Alimentaci√≥n', color: 'from-green-400 to-emerald-500' },
                { id: 2, name: '‚öΩ Deporte', color: 'from-blue-400 to-cyan-500' },
                { id: 3, name: 'üí° Servicios P√∫blicos', color: 'from-yellow-400 to-orange-500' },
                { id: 4, name: 'üè† Arriendo', color: 'from-red-400 to-rose-500' },
                { id: 5, name: 'üëï Ropa', color: 'from-pink-400 to-fuchsia-500' },
                { id: 6, name: '‚úàÔ∏è Viajes', color: 'from-indigo-400 to-purple-500' },
                { id: 7, name: 'üéâ Diversi√≥n', color: 'from-violet-400 to-purple-500' },
                { id: 8, name: 'üì∫ Ocio', color: 'from-teal-400 to-cyan-500' },
                { id: 9, name: 'üöï Transporte', color: 'from-amber-400 to-yellow-500' },
                { id: 10, name: 'üíä Salud', color: 'from-lime-400 to-green-500' },
                { id: 11, name: 'üêú Gastos Hormigas', color: 'from-slate-400 to-gray-500' },
                { id: 12, name: 'üßπ Servicios de Aseo', color: 'from-sky-400 to-blue-500' }
            ]);
            const [showForm, setShowForm] = useState(false);
            const [motivationalQuote, setMotivationalQuote] = useState('');
            const [formData, setFormData] = useState({
                amount: '',
                description: '',
                category: '',
                paymentMethod: 'efectivo'
            });

            const quotes = [
                { text: "Cada gasto registrado es un paso hacia tu libertad financiera", emoji: "üéØ" },
                { text: "El ahorro de hoy es la tranquilidad de ma√±ana", emoji: "üí∞" },
                { text: "¬°Vas genial! Ya llevas control de tus finanzas", emoji: "üöÄ" },
                { text: "Tus metas est√°n m√°s cerca de lo que crees", emoji: "‚≠ê" },
                { text: "Peque√±os pasos, grandes resultados", emoji: "üë£" },
                { text: "Tu futuro yo te agradecer√° este esfuerzo", emoji: "üôè" }
            ];

            useEffect(() => {
                // Load expenses from localStorage
                const saved = localStorage.getItem('expenses');
                if (saved) {
                    setExpenses(JSON.parse(saved));
                }
                // Set random quote
                const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
                setMotivationalQuote(randomQuote);
            }, []);

            const saveExpense = () => {
                if (!formData.amount || !formData.description || !formData.category) {
                    alert('Por favor completa todos los campos');
                    return;
                }

                const newExpense = {
                    id: Date.now(),
                    amount: parseFloat(formData.amount),
                    description: formData.description,
                    category: categories.find(c => c.id === parseInt(formData.category)),
                    paymentMethod: formData.paymentMethod,
                    date: new Date().toISOString(),
                    month: new Date().toLocaleDateString('es-CO', { year: 'numeric', month: '2-digit' })
                };

                const updated = [...expenses, newExpense];
                setExpenses(updated);
                localStorage.setItem('expenses', JSON.stringify(updated));

                // Reset form
                setFormData({ amount: '', description: '', category: '', paymentMethod: 'efectivo' });
                setShowForm(false);

                // Show success message
                alert('‚úÖ ¬°Gasto registrado exitosamente!');
            };

            const getTotalMonth = () => {
                const currentMonth = new Date().toLocaleDateString('es-CO', { year: 'numeric', month: '2-digit' });
                return expenses
                    .filter(e => e.month === currentMonth)
                    .reduce((sum, e) => sum + e.amount, 0);
            };

            const deleteExpense = (id) => {
                if (confirm('¬øSeguro que quieres eliminar este gasto?')) {
                    const updated = expenses.filter(e => e.id !== id);
                    setExpenses(updated);
                    localStorage.setItem('expenses', JSON.stringify(updated));
                }
            };

            return (
                <div className="p-4 pb-24 max-w-2xl mx-auto">
                    {/* Header */}
                    <div className="text-center mb-6">
                        <h1 className="text-3xl font-bold bg-gradient-to-r from-fuchsia-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent mb-2">
                            Control de Gastos
                        </h1>
                        <div className="h-1.5 bg-gradient-to-r from-fuchsia-600 via-purple-600 to-indigo-600 rounded-full shadow-lg mx-auto w-48"></div>
                    </div>

                    {/* Motivational Quote */}
                    <div className="bg-gradient-to-r from-yellow-100 to-amber-100 rounded-2xl p-4 mb-6 border-2 border-yellow-300 shadow-lg">
                        <div className="text-center">
                            <div className="text-4xl mb-2">{motivationalQuote.emoji}</div>
                            <p className="text-sm font-medium text-slate-700 italic">"{motivationalQuote.text}"</p>
                        </div>
                    </div>

                    {/* Total Month */}
                    <div className="bg-white rounded-2xl p-4 mb-6 shadow-xl border-2 border-purple-200">
                        <div className="text-center">
                            <div className="text-sm text-slate-600 mb-1">Total del Mes</div>
                            <div className="text-3xl font-bold bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent">
                                ${getTotalMonth().toLocaleString('es-CO')}
                            </div>
                            <div className="text-xs text-slate-500 mt-1">
                                {new Date().toLocaleDateString('es-CO', { month: 'long', year: 'numeric' })}
                            </div>
                        </div>
                    </div>

                    {/* Add Expense Button */}
                    {!showForm && (
                        <button
                            onClick={() => setShowForm(true)}
                            className="w-full bg-gradient-to-r from-fuchsia-500 to-purple-500 text-white rounded-2xl p-4 font-bold text-lg shadow-lg active:scale-95 transition-transform mb-6"
                        >
                            + Registrar Gasto
                        </button>
                    )}

                    {/* Form */}
                    {showForm && (
                        <div className="bg-white rounded-2xl p-4 mb-6 shadow-xl border-2 border-purple-200">
                            <h3 className="font-bold text-lg mb-4 text-slate-800">Nuevo Gasto</h3>
                            
                            <div className="space-y-3">
                                <div>
                                    <label className="block text-sm font-semibold text-slate-700 mb-1">Monto ($)</label>
                                    <input
                                        type="number"
                                        value={formData.amount}
                                        onChange={(e) => setFormData({...formData, amount: e.target.value})}
                                        className="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-400 focus:outline-none text-lg"
                                        placeholder="0"
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-semibold text-slate-700 mb-1">Descripci√≥n</label>
                                    <input
                                        type="text"
                                        value={formData.description}
                                        onChange={(e) => setFormData({...formData, description: e.target.value})}
                                        className="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-400 focus:outline-none"
                                        placeholder="¬øQu√© compraste?"
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-semibold text-slate-700 mb-1">Categor√≠a</label>
                                    <select
                                        value={formData.category}
                                        onChange={(e) => setFormData({...formData, category: e.target.value})}
                                        className="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-400 focus:outline-none"
                                    >
                                        <option value="">Selecciona...</option>
                                        {categories.map(cat => (
                                            <option key={cat.id} value={cat.id}>{cat.name}</option>
                                        ))}
                                    </select>
                                </div>

                                <div>
                                    <label className="block text-sm font-semibold text-slate-700 mb-1">M√©todo de Pago</label>
                                    <select
                                        value={formData.paymentMethod}
                                        onChange={(e) => setFormData({...formData, paymentMethod: e.target.value})}
                                        className="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-400 focus:outline-none"
                                    >
                                        <option value="efectivo">üíµ Efectivo</option>
                                        <option value="tarjeta">üí≥ Tarjeta</option>
                                        <option value="transferencia">üè¶ Transferencia</option>
                                    </select>
                                </div>

                                <div className="flex gap-3 pt-2">
                                    <button
                                        onClick={saveExpense}
                                        className="flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl p-3 font-bold active:scale-95 transition-transform"
                                    >
                                        Guardar
                                    </button>
                                    <button
                                        onClick={() => setShowForm(false)}
                                        className="flex-1 bg-slate-200 text-slate-700 rounded-xl p-3 font-bold active:scale-95 transition-transform"
                                    >
                                        Cancelar
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Expenses List */}
                    <div className="space-y-3">
                        <h3 className="font-bold text-lg text-slate-800 mb-3">Gastos Recientes</h3>
                        {expenses.length === 0 ? (
                            <div className="bg-white rounded-2xl p-8 text-center border-2 border-purple-100">
                                <div className="text-6xl mb-3">üìä</div>
                                <p className="text-slate-500">A√∫n no tienes gastos registrados</p>
                                <p className="text-sm text-slate-400 mt-1">¬°Comienza ahora!</p>
                            </div>
                        ) : (
                            [...expenses].reverse().map(expense => (
                                <div key={expense.id} className="bg-white rounded-xl p-4 shadow-lg border-2 border-purple-100">
                                    <div className="flex justify-between items-start mb-2">
                                        <div className="flex-1">
                                            <div className="font-bold text-lg text-slate-800">
                                                ${expense.amount.toLocaleString('es-CO')}
                                            </div>
                                            <div className="text-sm text-slate-600">{expense.description}</div>
                                        </div>
                                        <button
                                            onClick={() => deleteExpense(expense.id)}
                                            className="text-red-500 text-xl active:scale-90 transition-transform p-2"
                                        >
                                            üóëÔ∏è
                                        </button>
                                    </div>
                                    <div className="flex items-center justify-between text-xs">
                                        <span className={`bg-gradient-to-r ${expense.category.color} text-white px-3 py-1 rounded-full font-semibold`}>
                                            {expense.category.name}
                                        </span>
                                        <span className="text-slate-500">
                                            {new Date(expense.date).toLocaleDateString('es-CO')}
                                        </span>
                                    </div>
                                </div>
                            ))
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('app'));
        root.render(<ExpenseApp />);
    </script>
</body>
</html>
