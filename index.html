import React, { useState } from 'react';
import { Database, DollarSign, Tag, Calendar, TrendingUp, User } from 'lucide-react';

const ExpenseTrackerDataStructures = () => {
  const [selectedStructure, setSelectedStructure] = useState('expenses');

  const structures = {
    expenses: {
      name: 'Gastos (Expenses)',
      icon: DollarSign,
      color: 'bg-gradient-to-r from-pink-500 to-rose-500',
      fields: [
        { name: 'monto', type: 'number', description: 'Cantidad gastada' },
        { name: 'descripcion', type: 'string', description: 'Qu√© compraste/pagaste' },
        { name: 'categoria_id', type: 'string', description: 'Referencia a categor√≠a' },
        { name: 'mes', type: 'string (auto)', description: 'Se genera autom√°ticamente del mes actual' },
        { name: 'metodo_pago', type: 'string', description: 'Efectivo, tarjeta, etc.' },
        { name: 'notas', type: 'string', description: 'Comentarios adicionales (opcional)' },
        { name: 'recurrente', type: 'boolean', description: 'Si es gasto mensual fijo' },
      ]
    },
    categories: {
      name: 'Categor√≠as (Categories)',
      icon: Tag,
      color: 'bg-gradient-to-r from-emerald-500 to-teal-500',
      fields: [
        { name: 'nombre', type: 'string', description: 'Ej: Alimentaci√≥n, Deporte' },
        { name: 'icono', type: 'string', description: 'Emoji o nombre de √≠cono' },
        { name: 'color', type: 'string', description: 'Para gr√°ficos visuales' },
        { name: 'presupuesto_mensual', type: 'number', description: 'L√≠mite sugerido (opcional)' },
        { name: 'tipo', type: 'string', description: 'Fijo o Variable' },
      ]
    },
    charts: {
      name: 'Gr√°ficos (Charts)',
      icon: TrendingUp,
      color: 'bg-gradient-to-r from-violet-500 to-purple-500',
      fields: [
        { name: 'evolucion_por_categoria', type: 'object', description: 'Gr√°fico de l√≠nea mostrando evoluci√≥n de cada categor√≠a en el tiempo con topes m√≠nimos y m√°ximos' },
        { name: 'tope_minimo', type: 'number', description: 'L√≠mite inferior de gasto por categor√≠a' },
        { name: 'tope_maximo', type: 'number', description: 'L√≠mite superior de gasto por categor√≠a' },
        { name: 'evolucion_total_mensual', type: 'object', description: 'Gr√°fico mostrando la evoluci√≥n total de gastos a lo largo del mes' },
        { name: 'tipo_visualizacion', type: 'string', description: 'L√≠nea, barras, √°reas' },
        { name: 'periodo', type: 'string', description: 'Diario, semanal, mensual' },
      ]
    },
    budgets: {
      name: 'Presupuestos (Budgets)',
      icon: TrendingUp,
      color: 'bg-gradient-to-r from-amber-500 to-orange-500',
      fields: [
        { name: 'mes', type: 'string', description: 'Ej: 2026-01' },
        { name: 'total_presupuesto', type: 'number', description: 'L√≠mite total del mes' },
        { name: 'total_gastado', type: 'number', description: 'Suma de gastos del mes' },
        { name: 'meta_ahorro', type: 'number', description: 'Cu√°nto quieres ahorrar' },
      ]
    },
    user: {
      name: 'Usuario (User)',
      icon: User,
      color: 'bg-gradient-to-r from-cyan-500 to-blue-500',
      fields: [
        { name: 'nombre', type: 'string', description: 'Tu nombre' },
        { name: 'foto_perfil', type: 'image', description: 'Tu foto personal (opcional)' },
        { name: 'moneda', type: 'string', description: 'COP, USD, etc.' },
        { name: 'ingreso_mensual', type: 'number', description: 'Para calcular % de gastos' },
        { name: 'fecha_registro', type: 'datetime', description: 'Cu√°ndo empezaste' },
      ]
    },
    motivational: {
      name: 'Frases Motivacionales (Motivational)',
      icon: TrendingUp,
      color: 'bg-gradient-to-r from-yellow-500 to-amber-500',
      fields: [
        { name: 'frase', type: 'string', description: 'Mensaje motivacional del d√≠a' },
        { name: 'tipo', type: 'string', description: 'Registro, Ahorro, Meta, Progreso' },
        { name: 'icono', type: 'string', description: 'Emoji relacionado' },
        { name: 'frecuencia', type: 'string', description: 'Diaria, al registrar gasto, al lograr meta' },
      ]
    }
  };

  const relationships = [
    { from: 'expenses', to: 'categories', label: 'pertenece a' },
    { from: 'expenses', to: 'budgets', label: 'cuenta para' },
    { from: 'budgets', to: 'user', label: 'pertenece a' },
    { from: 'expenses', to: 'charts', label: 'se visualiza en' },
    { from: 'categories', to: 'charts', label: 'tiene topes en' },
    { from: 'motivational', to: 'user', label: 'motiva a' },
    { from: 'expenses', to: 'motivational', label: 'dispara frase en' },
  ];

  const defaultCategories = [
    { name: 'üçî Alimentaci√≥n', budget: 'Variable' },
    { name: '‚öΩ Deporte', budget: 'Variable' },
    { name: 'üí° Servicios P√∫blicos', budget: 'Fijo' },
    { name: 'üè† Arriendo', budget: 'Fijo' },
    { name: 'üëï Ropa', budget: 'Variable' },
    { name: '‚úàÔ∏è Viajes', budget: 'Variable' },
    { name: 'üéâ Diversi√≥n', budget: 'Variable' },
    { name: 'üì∫ Ocio', budget: 'Variable' },
    { name: 'üöï Transporte', budget: 'Variable' },
    { name: 'üíä Salud', budget: 'Variable' },
    { name: 'üêú Gastos Hormigas', budget: 'Variable', description: 'Domicilio, caf√©, agua' },
    { name: 'üßπ Servicios de Aseo', budget: 'Fijo' },
  ];

  const StructureIcon = structures[selectedStructure].icon;

  return (
    <div className="min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 p-8">
      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <div className="text-center mb-8">
          <div className="inline-block">
            <h1 className="text-5xl font-bold bg-gradient-to-r from-fuchsia-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent mb-2">
              Control de Gastos Personales
            </h1>
            <div className="h-1.5 bg-gradient-to-r from-fuchsia-600 via-purple-600 to-indigo-600 rounded-full shadow-lg"></div>
          </div>
        </div>

        {/* Structure Selector */}
        <div className="grid grid-cols-2 md:grid-cols-6 gap-4 mb-8">
          {Object.entries(structures).map(([key, struct]) => {
            const Icon = struct.icon;
            return (
              <button
                key={key}
                onClick={() => setSelectedStructure(key)}
                className={`p-4 rounded-xl transition-all transform hover:scale-105 ${
                  selectedStructure === key
                    ? `${struct.color} text-white shadow-lg`
                    : 'bg-white text-slate-700 hover:shadow-md'
                }`}
              >
                <Icon className="w-6 h-6 mx-auto mb-2" />
                <div className="text-sm font-semibold">{struct.name}</div>
              </button>
            );
          })}
        </div>

        {/* Main Content */}
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          {/* Structure Details */}
          <div className="lg:col-span-2 bg-white rounded-2xl shadow-2xl border-2 border-purple-100 p-6">
            <div className="flex items-center gap-3 mb-6">
              <div className={`${structures[selectedStructure].color} p-3 rounded-xl`}>
                <StructureIcon className="w-6 h-6 text-white" />
              </div>
              <h2 className="text-2xl font-bold text-slate-800">
                {structures[selectedStructure].name}
              </h2>
            </div>

            <div className="space-y-3">
              {structures[selectedStructure].fields.map((field, idx) => (
                <div
                  key={idx}
                  className="border-2 border-purple-200 rounded-lg p-4 hover:bg-gradient-to-r hover:from-purple-50 hover:to-pink-50 transition-all hover:border-purple-300 hover:shadow-md"
                >
                  <div className="flex items-start justify-between mb-2">
                    <span className="font-mono font-semibold text-slate-800">
                      {field.name}
                    </span>
                    <span className="text-xs bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full font-semibold shadow-md">
                      {field.type}
                    </span>
                  </div>
                  <p className="text-sm text-slate-600">{field.description}</p>
                </div>
              ))}
            </div>
          </div>

          {/* Relationships & Categories */}
          <div className="space-y-6">
            {/* Relationships */}
            <div className="bg-white rounded-2xl shadow-2xl border-2 border-indigo-100 p-6">
              <h3 className="text-lg font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-4">üîó Relaciones</h3>
              <div className="space-y-3">
                {relationships.map((rel, idx) => (
                  <div key={idx} className="text-sm">
                    <div className="font-semibold text-pink-600">
                      {structures[rel.from].name.split('(')[0].trim()}
                    </div>
                    <div className="text-purple-500 italic ml-2">‚Üì {rel.label}</div>
                    <div className="font-semibold text-emerald-600 ml-2">
                      {structures[rel.to].name.split('(')[0].trim()}
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {/* Default Categories */}
            <div className="bg-white rounded-2xl shadow-2xl border-2 border-pink-100 p-6">
              <h3 className="text-lg font-bold bg-gradient-to-r from-pink-600 to-rose-600 bg-clip-text text-transparent mb-4">üìã Categor√≠as Sugeridas</h3>
              <div className="space-y-2">
                {defaultCategories.map((cat, idx) => (
                  <div
                    key={idx}
                    className="flex items-center justify-between text-sm p-2 rounded hover:bg-gradient-to-r hover:from-purple-50 hover:to-pink-50 transition-all"
                  >
                    <div className="flex-1">
                      <span>{cat.name}</span>
                      {cat.description && (
                        <div className="text-xs text-slate-500 ml-6">{cat.description}</div>
                      )}
                    </div>
                    <span className={`text-xs px-3 py-1 rounded-full whitespace-nowrap font-semibold shadow-md ${
                      cat.budget === 'Fijo' 
                        ? 'bg-gradient-to-r from-orange-400 to-red-500 text-white' 
                        : 'bg-gradient-to-r from-cyan-400 to-blue-500 text-white'
                    }`}>
                      {cat.budget}
                    </span>
                  </div>
                ))}
              </div>
            </div>

            {/* Motivational Quotes */}
            <div className="bg-gradient-to-br from-yellow-50 to-amber-50 rounded-2xl shadow-2xl border-2 border-yellow-200 p-6">
              <h3 className="text-lg font-bold bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent mb-4">üí™ Frases Motivacionales</h3>
              <div className="space-y-3 text-sm">
                <div className="bg-white p-3 rounded-lg border border-yellow-200 shadow-sm">
                  <div className="font-semibold text-yellow-700 mb-1">üéØ Registro</div>
                  <p className="text-slate-700 italic">"Cada gasto registrado es un paso hacia tu libertad financiera"</p>
                </div>
                <div className="bg-white p-3 rounded-lg border border-green-200 shadow-sm">
                  <div className="font-semibold text-green-700 mb-1">üí∞ Ahorro</div>
                  <p className="text-slate-700 italic">"El ahorro de hoy es la tranquilidad de ma√±ana"</p>
                </div>
                <div className="bg-white p-3 rounded-lg border border-blue-200 shadow-sm">
                  <div className="font-semibold text-blue-700 mb-1">üöÄ Progreso</div>
                  <p className="text-slate-700 italic">"¬°Vas genial! Ya llevas control de tus finanzas"</p>
                </div>
                <div className="bg-white p-3 rounded-lg border border-purple-200 shadow-sm">
                  <div className="font-semibold text-purple-700 mb-1">‚≠ê Meta</div>
                  <p className="text-slate-700 italic">"Tus metas est√°n m√°s cerca de lo que crees"</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        {/* Implementation Notes */}
        <div className="mt-8 bg-gradient-to-r from-fuchsia-100 via-purple-100 to-indigo-100 rounded-2xl shadow-2xl border-2 border-purple-200 p-6">
          <h3 className="text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-4">üí° Notas de Implementaci√≥n</h3>
          <div className="grid md:grid-cols-2 gap-4 text-sm text-slate-700">
            <div>
              <h4 className="font-semibold mb-2">‚úÖ Funcionalidades Clave:</h4>
              <ul className="space-y-1 ml-4">
                <li>‚Ä¢ Registro r√°pido de gastos diarios</li>
                <li>‚Ä¢ Mes asignado autom√°ticamente al crear gasto</li>
                <li>‚Ä¢ Foto de perfil personalizada</li>
                <li>‚Ä¢ Frases motivacionales din√°micas</li>
                <li>‚Ä¢ Categorizaci√≥n autom√°tica (12 categor√≠as)</li>
                <li>‚Ä¢ Gastos recurrentes (arriendo, servicios)</li>
                <li>‚Ä¢ Alertas de presupuesto</li>
                <li>‚Ä¢ Gr√°fico de evoluci√≥n por categor√≠a con topes</li>
                <li>‚Ä¢ Gr√°fico de evoluci√≥n total mensual</li>
                <li>‚Ä¢ Control de gastos hormigas</li>
              </ul>
            </div>
            <div>
              <h4 className="font-semibold mb-2">üõ†Ô∏è Tecnolog√≠as Recomendadas:</h4>
              <ul className="space-y-1 ml-4">
                <li>‚Ä¢ Frontend: React + Tailwind CSS</li>
                <li>‚Ä¢ Backend: Firebase/Supabase</li>
                <li>‚Ä¢ Gr√°ficos: Recharts o Chart.js</li>
                <li>‚Ä¢ Storage: LocalStorage o base de datos cloud</li>
                <li>‚Ä¢ Fecha/Hora: JavaScript Date() para mes autom√°tico</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default ExpenseTrackerDataStructures;
